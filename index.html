<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Breakout - História do 6º Ano</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            overflow: hidden;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
            touch-action: none;
        }
        
        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.7);
            overflow: hidden;
        }
        
        canvas {
            display: block;
            background: #0a0e21;
            width: 100%;
            height: calc(100vh - 140px);
        }
        
        .screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10,14,33,0.9);
            color: white;
            z-index: 20;
            text-align: center;
            padding: 20px;
        }
        
        .screen h1 { 
            color: #ffcc00; 
            font-size: 2.5rem; 
            text-shadow: 0 0 10px #ffcc00; 
            margin-bottom: 15px;
        }
        
        .btn { 
            background: linear-gradient(to right, #ff8c00, #ffcc00); 
            color: #1a1a2e; 
            border: none; 
            padding: 12px 30px; 
            font-size: 1.3rem; 
            border-radius: 50px; 
            margin: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            transition: all 0.3s; 
            width: 80%;
            max-width: 300px;
        }
        
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0,0,0,0.4); }
        
        .stats { 
            position: absolute; 
            top: 10px; 
            left: 10px; 
            color: white; 
            font-size: 1rem; 
            background: rgba(0,0,0,0.5); 
            padding: 5px 10px; 
            border-radius: 5px; 
            z-index: 10; 
        }
        
        .lives { 
            position: absolute; 
            top: 10px; 
            right: 10px; 
            display: flex; 
            gap: 5px; 
            z-index: 10; 
        }
        
        .life { 
            width: 20px; 
            height: 20px; 
            background: linear-gradient(45deg, #ff5252, #ff793f); 
            border-radius: 50%; 
            box-shadow: 0 0 6px rgba(255,82,82,0.7); 
        }
        
        .question-container {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9); 
            padding: 20px; 
            border-radius: 10px; 
            border: 2px solid #ffcc00;
            box-shadow: 0 0 25px rgba(255,204,0,0.5); 
            z-index: 25; 
            display: none; 
            width: 90%; 
            max-width: 400px;
        }
        
        .question-text { 
            color: #ffcc00; 
            font-size: 1.3rem; 
            margin-bottom: 15px; 
            text-align: center;
        }
        
        .option { 
            padding: 10px 15px; 
            background: rgba(50,50,70,0.7); 
            border: 1px solid #444; 
            border-radius: 6px; 
            color: white; 
            margin: 6px 0; 
            cursor: pointer; 
            transition: all 0.2s;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .option:hover { 
            background: rgba(70,70,100,0.9); 
            transform: translateX(3px); 
        }
        
        .particles { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            pointer-events: none; 
            z-index: 1; 
        }
        
        .particle { 
            position: absolute; 
            width: 5px; 
            height: 5px; 
            border-radius: 50%; 
            pointer-events: none; 
        }
        
        .hidden { display: none !important; }
        
        .score-display { 
            font-size: 1.3rem; 
            color: #ffcc00; 
        }
        
        .bonus-indicator {
            position: absolute;
            top: 40px;
            right: 10px;
            color: white;
            font-size: 0.9rem;
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 5px;
            z-index: 10;
            display: none;
        }
        
        /* Controles Mobile - posicionados acima da base */
        .mobile-controls {
            position: absolute;
            bottom: 140px;
            width: 100%;
            height: 90px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 20px;
            z-index: 30;
            background: rgba(0,0,0,0.3);
            border-top: 1px solid rgba(255,204,0,0.2);
            display: none;
        }
        
        .control-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(255, 204, 0, 0.3);
            border: 2px solid #ffcc00;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: white;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            box-shadow: 0 0 15px rgba(255,204,0,0.3);
        }
        
        .control-btn:active {
            background: rgba(255, 204, 0, 0.6);
            transform: scale(0.9);
        }
        
        /* Ajustes específicos para celulares */
        @media (max-width: 768px) {
            .screen h1 { font-size: 2rem; }
            .btn { font-size: 1.1rem; padding: 10px 25px; }
            .stats { font-size: 0.9rem; }
            .question-text { font-size: 1.1rem; }
            .option { font-size: 0.9rem; padding: 8px 12px; }
            .life { width: 18px; height: 18px; }
            .bonus-indicator { font-size: 0.8rem; }
        }
        
        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="stats">
            Pontuação: <span id="score">0</span> | Nível: <span id="level">1</span>
        </div>
        <div class="lives" id="lives-container"></div>
        <div class="bonus-indicator" id="bonusIndicator"></div>
        <div class="particles" id="particles"></div>
        <canvas id="gameCanvas"></canvas>

        <!-- Controles Mobile - ocultos por padrão -->
        <div class="mobile-controls">
            <div class="control-btn" id="leftBtn">←</div>
            <div class="control-btn" id="rightBtn">→</div>
        </div>

        <div id="startScreen" class="screen">
            <h1>BRICK QUEST</h1>
            <p>Destrua os blocos e responda perguntas de história do 6º ano!</p>
            <div style="background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; margin: 20px 0; max-width: 90%;">
                <h3 style="color: #ffcc00; margin-bottom: 10px;">Tipos de Blocos:</h3>
                <ul style="text-align: left; padding-left: 20px; margin-top: 10px; font-size: 0.9rem;">
                    <li style="margin: 6px 0;">Blocos normais - Destrua para ganhar pontos</li>
                    <li style="margin: 6px 0;">Blocos com "?" - Responda perguntas de história</li>
                    <li style="margin: 6px 0;">Blocos com "+" - Aumentam o tamanho da raquete</li>
                    <li style="margin: 6px 0;">Blocos com "♥" - Ganhe uma vida extra</li>
                    <li style="margin: 6px 0;">Blocos com "●" - Ganhe uma bola extra</li>
                </ul>
            </div>
            <button id="startBtn" class="btn">INICIAR JOGO</button>
        </div>

        <div id="gameOverScreen" class="screen hidden">
            <h1>GAME OVER</h1>
            <h2>Pontuação: <span id="finalScore">0</span></h2>
            <button id="restartBtn" class="btn">JOGAR NOVAMENTE</button>
        </div>

        <div id="questionContainer" class="question-container">
            <div class="question-text" id="questionText">Carregando...</div>
            <div class="options" id="optionsContainer"></div>
        </div>
    </div>

    <script>
        // Canvas e contexto
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Redimensionar canvas quando a janela muda
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - 140;
        }
        
        // Inicializar canvas
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Elementos do jogo
        const paddle = {
            x: canvas.width / 2 - 60,
            y: canvas.height - 25,
            width: 120,
            height: 15,
            speed: 12,
            glow: 0,
            glowDirection: 1
        };

        let balls = [{
            x: canvas.width / 2,
            y: canvas.height - 40,
            radius: 8,
            dx: 4 * (Math.random() > 0.5 ? 1 : -1),
            dy: -4
        }];

        let score = 0;
        let lives = 3;
        let level = 1;
        let gameRunning = false;
        let blocks = [];
        let particles = [];
        let rightPressed = false;
        let leftPressed = false;
        let paddleSizeBonus = false;
        let bonusTimer = null;

        // Perguntas de história do 6º ano
        const historyQuestions = [
            { question: "Qual foi o primeiro tipo de escrita criado pelos sumérios?", options: ["Hieróglifos", "Cuneiforme", "Alfabeto grego", "Papiro"], answer: 1 },
            { question: "O que foi a Revolução Neolítica?", options: ["Transformação da sociedade da caça e coleta para a agricultura", "Invenção da roda", "Descoberta do fogo", "Criação das cidades"], answer: 0 },
            { question: "Qual era o principal rio da civilização egípcia?", options: ["Nilo", "Tigre", "Eufrates", "Amazônia"], answer: 0 },
            { question: "Quem eram os faraós?", options: ["Reis do Egito Antigo", "Sacerdotes do Egito", "Guerreiros da Mesopotâmia", "Comerciantes fenícios"], answer: 0 },
            { question: "O que foi a escrita cuneiforme?", options: ["Sistema de escrita com símbolos em forma de cunha", "Sistema de escrita com desenhos de animais", "Sistema de escrita com letras do alfabeto", "Sistema de escrita com símbolos em forma de linha"], answer: 0 },
            { question: "Qual foi a principal atividade econômica dos povos da Mesopotâmia?", options: ["Agricultura", "Caça", "Pesca", "Comércio marítimo"], answer: 0 },
            { question: "O que foi o Código de Hamurabi?", options: ["Conjunto de leis escritas da Babilônia", "Livro sagrado dos egípcios", "Sistema de escrita mesopotâmico", "Templo religioso da Mesopotâmia"], answer: 0 },
            { question: "Qual foi a principal religião dos egípcios antigos?", options: ["Politeísmo (crença em vários deuses)", "Monoteísmo (crença em um só Deus)", "Ateísmo (não acreditar em deuses)", "Nenhuma religião"], answer: 0 }
        ];

        // Elementos DOM
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const livesContainer = document.getElementById('lives-container');
        const finalScoreDisplay = document.getElementById('finalScore');
        const questionContainer = document.getElementById('questionContainer');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const bonusIndicator = document.getElementById('bonusIndicator');
        const particlesContainer = document.getElementById('particles');
        const mobileControls = document.querySelector('.mobile-controls');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');

        function init() {
            createBlocks();
            updateLivesDisplay();
            gameRunning = true;
            // Mostrar controles móveis quando o jogo começar
            mobileControls.style.display = 'flex';
            draw();
        }

        function createBlocks() {
            blocks = [];
            const rows = 2;
            const cols = 8;
            
            // Tipos de blocos
            const normalBlocks = 10;
            const questionBlocks = 2;
            const paddleBlocks = 1;
            const lifeBlocks = 1;
            const ballBlocks = 1;
            
            // Criar array com todos os tipos de blocos
            let blockTypes = [];
            for (let i = 0; i < normalBlocks; i++) blockTypes.push('normal');
            for (let i = 0; i < questionBlocks; i++) blockTypes.push('question');
            for (let i = 0; i < paddleBlocks; i++) blockTypes.push('paddle');
            for (let i = 0; i < lifeBlocks; i++) blockTypes.push('life');
            for (let i = 0; i < ballBlocks; i++) blockTypes.push('ball');
            
            // Embaralhar os tipos de blocos
            for (let i = blockTypes.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [blockTypes[i], blockTypes[j]] = [blockTypes[j], blockTypes[i]];
            }
            
            // Calcular tamanho dos blocos com margem de segurança
            const blockSize = { 
                width: (canvas.width / cols) - 10, 
                height: 30
            };
            
            // Ajuste CRÍTICO para garantir que os blocos caibam na tela do celular
            const startY = 10;
            
            let blockIndex = 0;
            
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    if (blockIndex >= blockTypes.length) break;
                    
                    let type = blockTypes[blockIndex];
                    let color;
                    let symbol = '';
                    
                    switch(type) {
                        case 'question':
                            color = '#4A90E2'; // Azul
                            symbol = '?';
                            break;
                        case 'paddle':
                            color = '#50C878'; // Verde esmeralda
                            symbol = '+';
                            break;
                        case 'life':
                            color = '#FF6B6B'; // Vermelho coral
                            symbol = '♥';
                            break;
                        case 'ball':
                            color = '#FFD700'; // Dourado
                            symbol = '●';
                            break;
                        default:
                            color = ['#FF5252', '#FF4081', '#E040FB', '#7C4DFF', '#536DFE', '#448AFF', '#40C4FF', '#18FFFF', '#64FFDA', '#69F0AE', '#B2FF59', '#EEFF41'][Math.floor(Math.random() * 12)];
                    }
                    
                    blocks.push({
                        x: c * (blockSize.width + 10) + 5,
                        y: startY + r * (blockSize.height + 8),
                        width: blockSize.width,
                        height: blockSize.height,
                        color: color,
                        destroyed: false,
                        type: type,
                        symbol: symbol
                    });
                    
                    blockIndex++;
                }
            }
        }

        function updateLivesDisplay() {
            livesContainer.innerHTML = '';
            for (let i = 0; i < lives; i++) {
                const life = document.createElement('div');
                life.className = 'life';
                livesContainer.appendChild(life);
            }
        }

        function showBonusMessage(message) {
            bonusIndicator.textContent = message;
            bonusIndicator.style.display = 'block';
            setTimeout(() => {
                bonusIndicator.style.display = 'none';
            }, 2000);
        }

        function resetPaddleSize() {
            paddle.width = 120;
            paddleSizeBonus = false;
            if (bonusTimer) clearTimeout(bonusTimer);
        }

        function createParticles(x, y, color, count = 8) {
            for (let i = 0; i < count; i++) {
                const p = {
                    x, y,
                    size: Math.random() * 4 + 2,
                    color: color,
                    dx: (Math.random() - 0.5) * 6,
                    dy: (Math.random() - 0.5) * 6,
                    alpha: 1
                };
                particles.push(p);
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Atualizar brilho da raquete
            paddle.glow += 0.05 * paddle.glowDirection;
            if (paddle.glow > 1) {
                paddle.glow = 1;
                paddle.glowDirection = -1;
            } else if (paddle.glow < 0.5) {
                paddle.glow = 0.5;
                paddle.glowDirection = 1;
            }

            // Desenhar raquete
            ctx.fillStyle = '#ffcc00';
            ctx.beginPath();
            ctx.roundRect(paddle.x, paddle.y, paddle.width, paddle.height, 8);
            ctx.fill();
            
            // Efeito de brilho
            ctx.shadowColor = `rgba(255, 204, 0, ${paddle.glow})`;
            ctx.shadowBlur = 15 + (paddle.glow * 10);
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // Borda da raquete
            ctx.strokeStyle = `rgba(255, 255, 255, ${paddle.glow})`;
            ctx.lineWidth = 2;
            ctx.stroke();

            // Desenhar bolas
            balls.forEach(ball => {
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                ctx.fillStyle = '#ffffff';
                ctx.fill();
                ctx.shadowColor = '#ffffff';
                ctx.shadowBlur = 15;
                ctx.fill();
                ctx.shadowBlur = 0;
            });

            // Desenhar blocos
            blocks.forEach(b => {
                if (!b.destroyed) {
                    ctx.fillStyle = b.color;
                    ctx.beginPath();
                    ctx.roundRect(b.x, b.y, b.width, b.height, 5);
                    ctx.fill();
                    
                    // Desenhar símbolo nos blocos especiais
                    if (b.symbol) {
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 20px Arial';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(b.symbol, b.x + b.width/2, b.y + b.height/2);
                    } else {
                        // Brilho para blocos normais
                        ctx.fillStyle = 'rgba(255,255,255,0.2)';
                        ctx.fillRect(b.x + 2, b.y + 2, b.width - 4, 6);
                    }
                }
            });

            // Desenhar partículas
            particles.forEach((p, i) => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${parseInt(p.color.slice(1,3),16)}, ${parseInt(p.color.slice(3,5),16)}, ${parseInt(p.color.slice(5,7),16)}, ${p.alpha})`;
                ctx.fill();
                p.x += p.dx; p.y += p.dy; p.size -= 0.08; p.alpha -= 0.02;
                if (p.size <= 0 || p.alpha <= 0) particles.splice(i, 1);
            });

            if (gameRunning) requestAnimationFrame(draw);
        }

        function movePaddle() {
            if (rightPressed && paddle.x < canvas.width - paddle.width) {
                paddle.x += paddle.speed;
            } else if (leftPressed && paddle.x > 0) {
                paddle.x -= paddle.speed;
            }
        }

        function moveBalls() {
            balls.forEach((ball, index) => {
                ball.x += ball.dx;
                ball.y += ball.dy;

                // Colisão com paredes
                if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) ball.dx *= -1;
                if (ball.y - ball.radius < 0) ball.dy *= -1;

                // Colisão com raquete
                if (
                    ball.y + ball.radius >= paddle.y &&
                    ball.y + ball.radius <= paddle.y + paddle.height &&
                    ball.x >= paddle.x &&
                    ball.x <= paddle.x + paddle.width
                ) {
                    ball.dy = -Math.abs(ball.dy);
                    ball.dx = (ball.x - (paddle.x + paddle.width/2)) / (paddle.width/4);
                    createParticles(ball.x, ball.y, '#ffcc00', 12);
                }

                // Perde vida se a bola sair pela parte inferior
                if (ball.y + ball.radius > canvas.height) {
                    balls.splice(index, 1);
                    if (balls.length === 0) {
                        lives--;
                        updateLivesDisplay();
                        if (lives <= 0) {
                            gameOver();
                        } else {
                            balls.push({
                                x: canvas.width / 2,
                                y: canvas.height - 40,
                                radius: 8,
                                dx: 4 * (Math.random() > 0.5 ? 1 : -1),
                                dy: -4
                            });
                        }
                    }
                }
            });
        }

        function blockCollision() {
            balls.forEach(ball => {
                for (let i = 0; i < blocks.length; i++) {
                    const b = blocks[i];
                    if (b.destroyed) continue;

                    if (
                        ball.x + ball.radius > b.x &&
                        ball.x - ball.radius < b.x + b.width &&
                        ball.y + ball.radius > b.y &&
                        ball.y - ball.radius < b.y + b.height
                    ) {
                        // Determinar direção da colisão
                        const left = Math.abs(ball.x + ball.radius - b.x);
                        const right = Math.abs(ball.x - ball.radius - (b.x + b.width));
                        const top = Math.abs(ball.y + ball.radius - b.y);
                        const bottom = Math.abs(ball.y - ball.radius - (b.y + b.height));

                        const min = Math.min(left, right, top, bottom);

                        if (min === left || min === right) ball.dx *= -1;
                        else ball.dy *= -1;

                        // Processar tipo de bloco
                        if (b.type === 'question') {
                            showQuestion();
                        } else if (b.type === 'paddle') {
                            if (!paddleSizeBonus) {
                                paddle.width = 180;
                                paddleSizeBonus = true;
                                showBonusMessage("Raquete aumentada!");
                                
                                if (bonusTimer) clearTimeout(bonusTimer);
                                bonusTimer = setTimeout(() => {
                                    resetPaddleSize();
                                    showBonusMessage("Raquete normalizada");
                                }, 10000);
                            }
                            score += 30;
                        } else if (b.type === 'life') {
                            lives++;
                            updateLivesDisplay();
                            showBonusMessage("Vida extra!");
                            score += 50;
                        } else if (b.type === 'ball') {
                            if (balls.length < 3) {
                                balls.push({
                                    x: ball.x,
                                    y: ball.y,
                                    radius: 8,
                                    dx: ball.dx * 0.8 + (Math.random() - 0.5) * 2,
                                    dy: -Math.abs(ball.dy) * 0.8
                                });
                                showBonusMessage("Bola extra!");
                            }
                            score += 40;
                        } else {
                            score += 10;
                        }

                        b.destroyed = true;
                        scoreDisplay.textContent = score;
                        createParticles(b.x + b.width/2, b.y + b.height/2, b.color, 15);

                        if (blocks.every(b => b.destroyed)) {
                            levelUp();
                        }
                        break;
                    }
                }
            });
        }

        function levelUp() {
            level++;
            levelDisplay.textContent = level;
            createBlocks();
            balls = [{
                x: canvas.width / 2,
                y: canvas.height - 40,
                radius: 8,
                dx: 4 * (Math.random() > 0.5 ? 1 : -1),
                dy: -4
            }];
        }

        function showQuestion() {
            gameRunning = false;
            
            const q = historyQuestions[Math.floor(Math.random() * historyQuestions.length)];
            questionText.textContent = q.question;
            optionsContainer.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('div');
                btn.className = 'option';
                btn.textContent = opt;
                btn.onclick = () => checkAnswer(i, q.answer);
                optionsContainer.appendChild(btn);
            });
            
            questionContainer.style.display = 'block';
        }

        function checkAnswer(selected, correct) {
            const options = optionsContainer.querySelectorAll('.option');
            options[selected].style.backgroundColor = selected === correct ? '#4CAF50' : '#f44336';
            
            if (selected !== correct) {
                options[correct].style.backgroundColor = '#4CAF50';
                lives--;
                updateLivesDisplay();
                showBonusMessage("Resposta incorreta! Perdeu uma vida.");
                
                if (lives <= 0) {
                    setTimeout(gameOver, 1500);
                    return;
                }
            } else {
                score += 50;
                scoreDisplay.textContent = score;
                showBonusMessage("Resposta correta! +50 pontos.");
            }
            
            options.forEach(o => o.style.pointerEvents = 'none');
            setTimeout(() => {
                questionContainer.style.display = 'none';
                gameRunning = true;
                draw();
            }, 2000);
        }

        function gameOver() {
            gameRunning = false;
            finalScoreDisplay.textContent = score;
            gameOverScreen.classList.remove('hidden');
            resetPaddleSize();
        }

        function resetGame() {
            score = 0;
            lives = 3;
            level = 1;
            balls = [{
                x: canvas.width / 2,
                y: canvas.height - 40,
                radius: 8,
                dx: 4 * (Math.random() > 0.5 ? 1 : -1),
                dy: -4
            }];
            scoreDisplay.textContent = score;
            levelDisplay.textContent = level;
            updateLivesDisplay();
            createBlocks();
            gameOverScreen.classList.add('hidden');
            resetPaddleSize();
            init();
        }

        // Controles Mobile
        leftBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            leftPressed = true;
        });
        
        leftBtn.addEventListener('touchend', () => {
            leftPressed = false;
        });
        
        rightBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rightPressed = true;
        });
        
        rightBtn.addEventListener('touchend', () => {
            rightPressed = false;
        });

        // Controles Desktop
        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') rightPressed = true;
            if (e.key === 'ArrowLeft') leftPressed = true;
        });

        document.addEventListener('keyup', e => {
            if (e.key === 'ArrowRight') rightPressed = false;
            if (e.key === 'ArrowLeft') leftPressed = false;
        });

        // Eventos
        startBtn.addEventListener('click', () => {
            startScreen.classList.add('hidden');
            init();
        });
        
        restartBtn.addEventListener('click', resetGame);

        // Loop principal
        function gameLoop() {
            if (gameRunning) {
                movePaddle();
                moveBalls();
                blockCollision();
            }
            requestAnimationFrame(gameLoop);
        }

        // Inicialização
        updateLivesDisplay();
        gameLoop();
    </script>
</body>
</html>